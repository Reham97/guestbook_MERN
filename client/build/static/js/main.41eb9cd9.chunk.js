(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){e.exports=a(30)},24:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(17),l=a.n(c),r=(a(24),a(1)),s=a(2),i=a(5),u=function(){var e=Object(s.f)(),t=Object(n.useContext)(v),a=t.state,c=t.dispatch;return o.a.createElement("nav",null,o.a.createElement("div",{className:"nav-wrapper"},o.a.createElement(i.b,{to:a?"/":"signin",className:"brand-logo"},o.a.createElement("img",{src:"http://res.cloudinary.com/software1997/image/upload/v1599995809/date8bivdx6tibh5bvsb.webp",width:"100px",height:"60px"})),function(){if(a)return o.a.createElement("ul",{id:"nav-mobile",className:"left hide-on-med-and-down",style:{marginLeft:"10%"}},a?"Hi "+a.name:"")}(),o.a.createElement("ul",{id:"nav-mobile",className:"right hide-on-med-and-down"},a?[o.a.createElement("li",{key:"createmess"},o.a.createElement(i.b,{to:"/createmessage",className:"color-text"},"Create Message")),o.a.createElement("li",{key:"logout"},o.a.createElement("button",{className:"btn #c62828 blue darken-4",onClick:function(){localStorage.clear(),c({type:"CLEAR"}),e.push("/signin")}},"Logout"))]:[o.a.createElement("li",{key:"signin"},o.a.createElement(i.b,{to:"/signin",className:"color-text"},"Sign In")),o.a.createElement("li",{key:"signup"},o.a.createElement(i.b,{to:"/signup",className:"color-text"},"Sign Up"))])))},m=(a(29),function(){var e=Object(n.useState)([]),t=Object(r.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),s=Object(r.a)(l,2),u=(s[0],s[1],Object(n.useContext)(v)),m=u.state;u.dispatch;Object(n.useEffect)((function(){fetch("/allmessages",{headers:{Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),c(e.messages)}))}),[]);return o.a.createElement("div",{className:"home"},a.map((function(e){return o.a.createElement("div",{className:"card home-card",key:e._id},e.postedBy._id==m._id?o.a.createElement(o.a.Fragment,null,o.a.createElement("i",{className:"material-icons hand",style:{float:"right"},onClick:function(){return t=e._id,void fetch("/deletemessage/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=a.filter((function(t){return t._id!==e._id}));c(t)}));var t}},"delete"),o.a.createElement(i.b,{to:"/updatemessage/"+e._id},o.a.createElement("i",{className:"material-icons hand",style:{float:"right"}},"edit"))):o.a.createElement(o.a.Fragment,null),o.a.createElement("h5",{style:{padding:"5px"}},o.a.createElement(i.b,{to:e.postedBy._id!==m._id?"/profile/"+e.postedBy._id:"/profile"},e.postedBy.name)),o.a.createElement("div",{className:"card-image"},o.a.createElement("img",{src:e.photo})),o.a.createElement("div",{className:"card-content"},o.a.createElement("h3",null,o.a.createElement("small",null,"Title: "),e.title),o.a.createElement("h5",null,o.a.createElement("small",null,"Description: "),e.body),o.a.createElement("h6",null,"comments:"),e.comments.map((function(e){return o.a.createElement("h6",{key:e._id},o.a.createElement("span",{style:{fontWeight:"500"}},"(",e.postedBy.name,")",e.postedBy._id==m._id?o.a.createElement("i",{className:"material-icons hand",style:{},onClick:function(){return t=e._id,void fetch("/deletecomment/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")}}).then((function(e){return e.json()})).then((function(e){fetch("/allmessages",{headers:{Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),c(e.messages)}))}));var t}},"delete"):o.a.createElement(o.a.Fragment,null))," ",e.text)})),o.a.createElement("form",{onSubmit:function(t){var n,o;t.preventDefault(),n=t.target[0].value,o=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")},body:JSON.stringify({messageId:o,text:n})}).then((function(e){return e.json()})).then((function(e){var t=a.map((function(t){return t._id==e._id?e:t}));c(t)})).catch((function(e){console.log(e)}))}},o.a.createElement("div",{className:"card-action"},o.a.createElement("input",{type:"text",placeholder:"add a comment"})))))})))}),d=a(3),h=a.n(d),p=function(){var e=Object(s.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),m=u[0],d=u[1],p=Object(n.useContext)(v),g=(p.state,p.dispatch);return o.a.createElement("div",{className:"mycard"},o.a.createElement("div",{className:"card auth-card"},o.a.createElement("h2",null,"Wellcome")," ",o.a.createElement("h2",null," Back"),o.a.createElement("input",{type:"text",placeholder:"email",value:c,onChange:function(e){return l(e.target.value)}}),o.a.createElement("input",{type:"text",placeholder:"password",value:m,onChange:function(e){return d(e.target.value)}}),o.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:m,email:c})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?h.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(localStorage.setItem("guestBook-jwt",t.token),localStorage.setItem("guestBook-user",JSON.stringify(t.user)),g({type:"USER",payload:t.user}),h.a.toast({html:"signedin success",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}},"Sign In")))},g=function(){var e=Object(s.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(""),g=Object(r.a)(p,2),f=g[0],b=g[1],E=Object(n.useState)(""),v=Object(r.a)(E,2),j=v[0],y=v[1];return o.a.createElement("div",{className:"mycard"},o.a.createElement("div",{className:"card auth-card"},o.a.createElement("h2",null,"Wellcome"),o.a.createElement("input",{type:"text",placeholder:"name",value:c,onChange:function(e){return l(e.target.value)}}),o.a.createElement("input",{type:"text",placeholder:"email",value:m,onChange:function(e){return d(e.target.value)}}),o.a.createElement("input",{type:"text",placeholder:"password",value:f,onChange:function(e){return b(e.target.value)}}),o.a.createElement("input",{type:"text",placeholder:"confirm-password",value:j,onChange:function(e){return y(e.target.value)}}),o.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){c.length<5?h.a.toast({html:"name length shoukd be more than 5 characters",classes:"#c62828 red darken-3"}):/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(m)?f.length<8?h.a.toast({html:"password length shoukd be more than 8 characters",classes:"#c62828 red darken-3"}):f===j?fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:f,email:m,name:c})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?h.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(h.a.toast({html:t.message,classes:"#43a047 green darken-1"}),e.push("/signin"))})).catch((function(e){console.log(e)})):h.a.toast({html:"faild to confirm password",classes:"#c62828 red darken-3"}):h.a.toast({html:"invalid email",classes:"#c62828 red darken-3"})}},"Sign Up")))},f=function(){var e=Object(s.f)(),t=Object(n.useState)(""),a=Object(r.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(""),u=Object(r.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(""),g=Object(r.a)(p,2),f=g[0],b=g[1],E=Object(n.useState)(""),v=Object(r.a)(E,2),j=v[0],y=v[1];Object(n.useEffect)((function(){j&&fetch("/createmessage",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")},body:JSON.stringify({title:c,body:m,photo:j})}).then((function(e){return e.json()})).then((function(t){t.error?h.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(h.a.toast({html:"Created Successfully",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}),[j]);return o.a.createElement("div",{className:"card input-filed",style:{margin:"30px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},o.a.createElement("input",{type:"text",placeholder:"title",value:c,onChange:function(e){return l(e.target.value)}}),o.a.createElement("input",{type:"text",placeholder:"body",value:m,onChange:function(e){return d(e.target.value)}}),o.a.createElement("div",{className:"file-field input-field"},o.a.createElement("div",{className:"btn #64b5f6 blue darken-1"},o.a.createElement("span",null,"Uplaod Image"),o.a.createElement("input",{type:"file",onChange:function(e){return b(e.target.files[0])}})),o.a.createElement("div",{className:"file-path-wrapper"},o.a.createElement("input",{className:"file-path validate",type:"text"}))),o.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return function(){var e=new FormData;e.append("file",f),e.append("upload_preset","guestBook-mern"),e.append("cloud_name","software1997"),fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).IMGURI,{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){y(e.url)})).catch((function(e){console.log(e)}))}()}},"Submit Message"))},b=function(){var e=Object(s.g)().messageId,t=Object(s.f)(),a=Object(n.useState)(""),c=Object(r.a)(a,2),l=c[0],i=c[1],u=Object(n.useState)(""),m=Object(r.a)(u,2),d=m[0],p=m[1],g=Object(n.useState)(""),f=Object(r.a)(g,2),b=f[0],E=f[1],v=Object(n.useState)(""),j=Object(r.a)(v,2),y=j[0],O=j[1],S=Object(n.useState)(""),k=Object(r.a)(S,2),w=k[0],N=k[1];Object(n.useEffect)((function(){fetch("/specificmessage/".concat(e),{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),i(e.message.title),p(e.message.body),O(e.message.photo)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){w&&C()}),[w]);var C=function(){fetch("/updatemessagephoto",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")},body:JSON.stringify({photo:w,messageId:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?h.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(h.a.toast({html:"updated successfully",classes:"#43a047 green darken-1"}),t.push("/"))})).catch((function(e){console.log(e)}))};return o.a.createElement("div",{className:"card input-filed",style:{margin:"30px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},o.a.createElement("div",null,o.a.createElement("img",{style:{width:"160px",height:"160px",borderRadius:"80px"},src:y||"loading"})),o.a.createElement("input",{type:"text",placeholder:"title",value:l,onChange:function(e){return i(e.target.value)}}),o.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){fetch("/updatemessagetitle",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")},body:JSON.stringify({title:l,messageId:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?h.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(h.a.toast({html:"updated successfully",classes:"#43a047 green darken-1"}),t.push("/"))})).catch((function(e){console.log(e)}))}},"Update Title"),o.a.createElement("input",{type:"text",placeholder:"body",value:d,onChange:function(e){return p(e.target.value)}}),o.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){fetch("/updatemessagebody",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("guestBook-jwt")},body:JSON.stringify({body:d,messageId:e})}).then((function(e){return e.json()})).then((function(e){console.log(e),e.error?h.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(h.a.toast({html:"updated successfully",classes:"#43a047 green darken-1"}),t.push("/"))})).catch((function(e){console.log(e)}))}},"Update Body"),o.a.createElement("div",{className:"file-field input-field"},o.a.createElement("div",{className:"btn #64b5f6 blue darken-1"},o.a.createElement("span",null,"Uplaod Image"),o.a.createElement("input",{type:"file",onChange:function(e){return E(e.target.files[0])}})),o.a.createElement("div",{className:"file-path-wrapper"},o.a.createElement("input",{className:"file-path validate",type:"text"}))),o.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){return function(){var e=new FormData;e.append("file",b),e.append("upload_preset","guestBook-mern"),e.append("cloud_name","software1997"),fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).IMGURI,{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){N(e.url)})).catch((function(e){console.log(e)}))}()}},"Update Image"))},E=function(e,t){return"USER"==t.type?t.payload:"CLEAR"==t.type?null:e},v=Object(n.createContext)(),j=function(){var e=Object(s.f)(),t=Object(n.useContext)(v),a=(t.state,t.dispatch);return Object(n.useEffect)((function(){var t=JSON.parse(localStorage.getItem("guestBook-user"));t?a({type:"USER",payload:t}):e.push("/signin")}),[]),o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/"},o.a.createElement(m,null)),o.a.createElement(s.a,{path:"/signin"},o.a.createElement(p,null)),o.a.createElement(s.a,{path:"/signup"},o.a.createElement(g,null)),o.a.createElement(s.a,{path:"/createmessage"},o.a.createElement(f,null)),o.a.createElement(s.a,{path:"/updatemessage/:messageId"},o.a.createElement(b,null)))};Object(n.createContext)();var y=function(){var e=Object(n.useReducer)(E,null),t=Object(r.a)(e,2),a=t[0],c=t[1];return o.a.createElement(v.Provider,{value:{state:a,dispatch:c}},o.a.createElement(i.a,null,o.a.createElement(u,null),o.a.createElement(j,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.41eb9cd9.chunk.js.map